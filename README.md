# VV's SSH Tools



[TOC]

## 中文版

### 这是个啥货？

每次当我面临发布部署时，面对无数的无论是实体的还是虚拟的PC设备，无数次反复敲打键盘，敲打着“SSH”命令。我累了，我要改变。为此我学习了[Expect ](https://en.wikipedia.org/wiki/Expect) ，这货太复杂。而且需要在系统上装一大堆TK/TCL脚本，太麻烦。所以我给我自己一个生日礼物，也给你们大家。



**这是一个SSH远程运行脚本的自动化工具！** 它可以：

- 自动ssh登录服务器，一个配置文件就搞定
- 运行远程shell命令，就像你在手工输入
- 自动填充sudo密码，就像你在手工输入
- 读取远端的命令输出，就像你在手工复制/粘贴
- 整合SCP功能，不用再反复输入密码和命令行
- 其他功能，等待你的贡献加入 :-)





从此不用再：

- `scp`,`ssh`一个个命令反复敲打
- 反复密码输入
- 远程多机部署配置，一个脚本轻松搞定



> 感谢以下项目给予的启示与帮助
>
> 

### 这货的使用方法

#### 安装

在[这里](https://github.com/iONCreate/vvssh/release/)下载对应的版本即可，放置在对应目录

| 操作系统 |  架构  |
| :------: | :----: |
| Windows  |  X86   |
| Windows  | X86-64 |
|  Linux   |  X86   |
|  Linux   | X86-64 |
|  Linux   | ARMv7  |
|  Linux   | ARMv8  |
|  MacOS   | X86-64 |
|  MacOS   |  X86   |





### 使用

按照一下方式运行

- `vvssh [远程脚本文件名]` 
- `vvssh [配置文件名] [远程脚本文件名]`
- `vvssh [-u 用户名] [-p 密码] [-s 服务器] [-t 超时] [配置文件名] [远程脚本文件名]`
- *待实现：`vvssh [-u 用户名] [-p 密码] [-s 服务器] [-t 超时] [-c] [简单脚本]`* 



### 配置文件编写说明

配置文件主要用于存储一些主机的信息，免得你一天到晚，输入密码。

配置文件只有一行，共四个字段，以空格间隔，为以下内容：

```
[user] [password] [Server Address] [Time out]
```

| 字段           | 说明                     | 例子           |
| -------------- | ------------------------ | -------------- |
| user           | 用户名                   | admin          |
| password       | 密码                     | thisispass     |
| Server Address | ssh 服务器地址与**端口** | 192.168.0.1:22 |
| Time out       | 超时时间设置（单位：秒） | 30             |

以下是一个例子🌰：

```
admin thisisPass 192.168.0.1:22 20
```

> PS: 我一般都是用一个Shell 文件套用，用`echo "root test1 192.168.0.1 30" >Server.conf` 这样的形式直接生成一个我配置文件



- 未来可以支持多行不同的配置，看看大家的要求投票吧



### 远程脚本编写说明

#### 简介

远程脚本文件在远程主机上执行，就像你在终端中直接敲打命令一样。但是有一些非常简单特殊命令你需要了解。

你可以使用一个支持shell脚本的语法高亮编辑器轻松编辑该文件。

- 使用`#==`作为单行命令的标记

  > `#` 符号是shell 脚本中的注释符号

- 使用`$[]`作为内部变量的标记

  > 我选这个标记的原因是，现在终端命令中很少用到这个，但这个标示在很多shell脚本环境中具有歧义，也许以后会调整，大家可以多提建议

#### 单行命令

目前支持以下命令：

| 命令     | 参数                                   | 说明                                                         | 例子                                   |
| -------- | -------------------------------------- | ------------------------------------------------------------ | -------------------------------------- |
| scp      | `[本地文件名/或目录名] [远程文件路径]` | 执行SCP传送任务                                              | `#==scp /test.file /home/tt/test.file` |
| user     | `[用户名]`                             | 设置SSH用户名称，仅仅一次生效                                | `#==user admin`                        |
| server   | `[服务器地址端口]`                     | 设置服务器地址                                               | `#==server 192.168.1.1:22`             |
| pass     | `[密码]`                               | 设置SSH登陆密码                                              | `#==pass test123`                      |
| timeout  | `[超时时间]`                           | 设置超时(秒)，默认30秒,超时从开始读取控制台输出计算，到读取到控制台输出行，规则是超时后首先发送`Enter`。 | `#==timeout 10`                        |
| autosudo |                                        | 自动在提示sudo密码时提供密码，同pass设置                     | `#autosudo`                            |
| var_cmd  | `$[本地变量名称] [远端命令]`           |                                                              |                                        |





## 参考

- [Shell Prompt](https://en.wikibooks.org/wiki/Guide_to_Unix/Explanations/Shell_Prompt)
- 

